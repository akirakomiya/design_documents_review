# テーブル定義書1
## 全体
- カラム名に自身のテーブル名を含まないようしてください。
	>カラム名に自身のテーブル名を含まないようしてください。
    ・特に、主キーになるidをuser_idなどにしないようにしましょう。
    ・railsでは、主キーを'id'と前提した使用になってます。model.find()など。
- user_l_namemなど略語を使わないようにしましょう。
	>user_l_nameなど、略語を使わないでください。
    ・last_nameはlast_nameといった名前にしてください。
- created_atが全てユーザ登録日時になっている。
	>created_atが全てユーザ登録日時になっているのでテーブル名に適したカラム説明に変更しましょう
- updated_atが全てユーザ更新日時になっている
	>updated_atが全てユーザ登録日時になっているのでテーブル名に適したカラム説明に変更しましょう
- テーブル名が小文字の複数形になっていない
	>テーブル名が小文字の複数形に統一しましょう
- ユーザーの配送先を複数保持するためのテーブルがない
	>配送先の情報はどこで持ちますか？
- 商品を入荷するためのテーブルがない
	>商品の入荷はどこで管理しますか？

## Admin
- 主キーがない
	>主キーには原則、indexを割り振りましょう。
- idにAUTO INCREMENTを適用してない
	>主キーにAUTO INCREMENTを適用させましょう
- テーブル名が大文字で単数形になっている
	>テーブル名が小文字の複数形にしましょう

## Users
- 退会ステータスのデータ型が違うのとtrueとfalseが何を表すか不明
	>退会ステータスのFalseが何を表すのか備考に記載しましょう。ステータスを管理するときのデータ型はどうなるでしょうか？
- 郵便番号と住所のデータ型がstiringだと先頭の0を認識できないためintegerにしていることを備考に記載されていない
	>このテーブルの電話番号がintegerになっています。
    ・電話番号は0始まりが基本です。integerは数値型のため、先頭に0を持つことができません

## Products
- ジャンル、レーベル、アーティストIDのFKがない
	>genres、labels、artistsテーブルとの関係性はどうなっていますか？　リレーションを見直しましょう
- 在庫の個数で在庫ステータスは判別できるのでこのカラム入らない
	>在庫の個数で在庫ステータスは判別できるのでこのカラムはなくて大丈夫です
- 在庫数は入荷数と販売数との差であらわせるのと可読性が悪くなるためいらない
	>在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか。
    ・例えば現在の在庫が100個あって、入荷が350個あった場合、在庫数を450と入力する運用だとすると計算ミスを誘発しやすく、実際の在庫数とデータベース上の在庫数に差が生まれやすい構造となります。
- disc_idはproductsテーブルの子要素のためいらない
	>discsテーブルとの関係性はどうなっていますか？　リレーションを見直しましょう

## Discs
- ディスク番号を管理するカラムがない
	>ディスク番号はどのように管理しますか


## Songs
- songのidがない
	>主キーがないのでテーブル名にあった主キーを追加しましょう
- 曲名のデータ型がintegerになってる
	>曲名のデータ型がintegerになっているので、文字を入力することができるカラムに変更しましょう
- songというカラムはsong名を表すためnameなどにした方が良い
	>songというカラムはsong名を表しますか？　その場合わかりやすいようにnameなどのカラム名にすると良いです。
- 曲順を表すトラック番号のカラムがない
	>トラック番号はどのように管理しますか

## Labels
- labelのidがない
	>主キーがないのでテーブル名にあった主キーを追加しましょう
- product_idはlabelsテーブルの子要素のためいらない
	>productsテーブルとの関係性はどうなっていますか？　リレーションを見直しましょう
- labelというカラムはlabel名を表すためnameなどにした方が良い
	>labelというカラムはlabel名を表しますか？　その場合わかりやすいようにnameなどのカラム名にすると良いです。

## Artists
- artistのidがない
	>主キーがないのでテーブル名にあった主キーを追加しましょう
- アーティスト名のデータ型がintegerになってる
	>アーティスト名のデータ型がintegerになっているので、文字を入力することができるカラムに変更しましょう
- product_idはartistsテーブルの子要素のためいらない
	>productsテーブルとの関係性はどうなっていますか？　リレーションを見直しましょう
- artistというカラムはartist名を表すためnameなどにした方が良い
	>artistというカラムはlabel名を表しますか？　その場合わかりやすいようにnameなどのカラム名にすると良いです。

## Genres
- genreのidがない
	>主キーがないのでテーブル名にあった主キーを追加しましょう
- ジャンル名のデータ型がintegerになってる
	>ジャンル名のデータ型がintegerになっているので、文字を入力することができるカラムに変更しましょう
- product_idはgenresテーブルの子要素のためいらない
	>productsテーブルとの関係性はどうなっていますか？　リレーションを見直しましょう
- genreというカラムはgenre名を表すためnameなどにした方が良い
	>gemreというカラムはlabel名を表しますか？　その場合わかりやすいようにnameなどのカラム名にすると良いです。

## Cart_items
- cart_itemのidがない
	>主キーがないのでテーブル名にあった主キーを追加しましょう
- 商品IDのデータ型が記載されてない
	>商品IDのデータ型が記載されてないので、付け加えましょう
- products_idとなっていて単数形になっていない
	>products_idとなっています。idも持つカラムは基本的に単数形で記載しましょう
- buy numとなっているのでスネークケースを用いるかamountなどわかりやすいカラムに変更した方が良い
	>カラム名はスネークケースとしてください。amountなどわかりやすいカラムに変更した方が良いと思います
    ・＝先頭小文字、単語間はアンダーバー。
- 小計金額は数量と金額から算出できるので不要
	>小計金額は商品の値段と個数で出せるため特定のカラムを作らなくて大丈夫です。

## Buy_details
- テーブル名やそれに関するカラムが管理者視点になっていない
	>テーブル名の命名は、管理者視点の用語がbetterです。
  - buy_details→order_details
- buyテーブルとのリレーションが定義されていない
	>購入詳細テーブルから見て購入テーブルとは多対１以上の関係で、購入した時に購入詳細は1以上になります。　このことを踏まえた上でリレーションを見直しましょう
- productsテーブルとのリレーションが定義されていない
	>商品の情報はどのように保持しますか？
- 小計価格ではなく購入時の価格を保持するカラムにした方が良い
	>小計価格ではなく購入時の価格を保持するカラムに変更しましょう
- buy numとなっているのでスネークケースを用いるかamountなどわかりやすいカラムに変更した方が良い
	>カラム名はスネークケースとしてください。amountなどわかりやすいカラムに変更した方が良いと思います
    ・＝先頭小文字、単語間はアンダーバー。

## Buy
- テーブル名やそれに関するカラムが管理者視点になっていない
	>テーブル名の命名は、管理者視点の用語がbetterです。
  - buy→order
- 購入日カラムがいらない
	>購入日カラムはデフォルトで作られる登録日カラムが役割を担ってくれるため必要ございません
- 支払い方法の詳細のカラムが動詞になっているのでpaymentなどの名詞を使う必要があるのと支払い方法はenumで管理してそれに対応したデータ型であるintegerにしなければいけない
	>payは動詞なので、状態を表すように名詞にしてください。　支払い方法をenumで管理する場合は対応しているデータであるintegerに変更しましょう
- 支払い合計のカラム名がstockになっているのでsumなど合計を表すカラム名にする必要がある
	>支払い合計のカラム名がstockになっているのでsumなど合計を表すカラム名に変更しましょう
- 消費税に関するカラムがない
	>消費税に関するカラムを追加しましょう
- 送付先住所と一緒に必要な郵便番号と氏名がない
	>住所のカラム以外にも郵便番号カラムをつけ加えましょう

# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。




# フィードバック（清水）
[add]→付け加えなければいけないところ
[fix]→修正が必要なところ
[comment]→その他コメント（修正ではないけど、確認して欲しいポイントです）

## 全体
- [add]created_atが全てユーザ登録日時になっている。
- [add]updated_atが全てユーザ更新日時になっている。
- [add]PKのカラム名はidであるということと、そもそもPKがないテーブルがあるので指摘。
- [add]テーブル名は小文字の複数形。スネークケースを使う。
- [add]ユーザーが複数住所を登録することを考慮できていない。複数住所を登録するためのテーブルが別に必要。
- [add]商品が入荷される情報を管理するためのテーブルが必要。

## Admin
- [add]命名。adminsテーブルにする。

## Songs
- [fix]↑これはusersテーブルに関する指摘ですよね？？
- 退会ステータスのデータ型が違うのとtrueとfalseが何を表すか不明
　- [fix]defultでfalseとなっているということは、ユーザーステータスをtrue or falseのbool型で表現するという意味。のであるならば、データ型はstringでない。
- [add]郵便番号がinteger型。integerではいけない理由はわかりますか？ヒントは0から始まる番号をintegerで管理するとどうなるかです。
- [add]電話番号がinteger型。上と同じ理由。

## Products
- 在庫ステータスのデータ型が違うのと何を表しているかわからない
　- [fix]在庫の個数で在庫ステータスは判別できるのでこのカラム自体不要
- [add]在庫数カラムは（入荷数）ー（販売数）で計算できる数値なので不要。基本的に、計算後のデータはデータテーブルに保存しない。理由はわかりますか？？？
- [add]disc_idをFKで持つということは、productが子要素、discが親要素になるということです。逆ですね。

## [add]discs
- [add]ディスクの番号を管理したいですが、トラックナンバーを管理する必要はないですね。

## Labels
- [add]product_idは不要ですね。理由はわかりますか？？？

## Artists
- [add]product_idは不要ですね。

## Genres
- [add]product_idは不要ですね。

## Cart_items
- [add]小計金額は不要（数量と商品の価格から算出可能）。
- [add]products_idではなく、product_idにすべき。
- [add]buy numの意味がわかりにくい。せめて、スネークケースを用いる。購入数を表すのであれば、amountとかいった単語が適切。

## Buy_details
- [fix]buyテーブルと親子関係を見直す。
- [add]productsテーブルとリレーションが必要。
- [add]buy numの意味がわかりにくい。購入数を表すのであれば、amountとかいった単語が適切。
- [add]このテーブルは注文された商品一つずつを保存する。なので、小計金額を保存しない。その代わり、商品の「購入時の」価格を保存できるようにする。理由はわかりますか？？？

## Buy
- [fix]支払い方法の詳細というよりかは、カラム名が不適。動詞は使わない。名詞を使う。そして、方法情報は選択肢なのでenumを用いて表現する。そのときデータ型は？
- [fix]buyテーブルと親子関係を見直す。
- [fix]支払い合計を表す言葉がなぜかstockになっている。
- [fix]送付先住所はあるが、郵便番号と住所がない。
- 消費税カラムを作るほうがベター。



# 研修担当レビュー
<font color="Red">再提出の際はこのレビューを残しておいてください。</font>

## Users
- 住所とは別の配送先住所がある(配送先を複数登録する)ことを考慮できていません。
(カラムに持つということはユーザーと住所の関連性は1 対 1になるので、複数の配送先を登録できるように別のテーブルを用意するべきです。)

## Products
- disc_idというカラムは本当に必要でしょうか？discsテーブルとproductsテーブルの関連性を見直してください
- cd_titleやcd_imageというカラムにcd_という接頭辞がついていますが、適切でしょうか？

## Songs
- このテーブルには曲名と曲順を管理するカラムがそれぞれ必要なはずです。
また、songというカラム名は何を示しているかわかりづらいです。

## Labels
- labelというカラムの命名は適切でしょうか？テーブル名とカラム名が同じになることは基本的にありません。

## Artists
- artistというカラムの命名は適切でしょうか？テーブル名とカラム名が同じになることは基本的にありません。

## Genres
- genreというカラムの命名は適切でしょうか？テーブル名とカラム名が同じになることは基本的にありません。

## CartItems
- 小計金額は不要です。（数量と商品の価格から算出可能）
